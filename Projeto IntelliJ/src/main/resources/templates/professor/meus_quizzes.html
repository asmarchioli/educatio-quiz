<!DOCTYPE html>
<html lang="pt-BR" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Educatio Quiz - Meus Quizzes</title>
    <!-- <link rel="stylesheet" th:href="@{/css/style.css}"> -->
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/fluxo_professor.css}">
</head>
<body>

    <!-- CABE√áALHO (Navbar) -->
    <nav class="navbar">
        <h1>üéì Educatio Quiz - Professor</h1>
        <div style="display: flex; align-items: center; gap: 1rem;">
            <span th:text="${professor.nome}"></span>
            <a href="/logout" class="btn-logout">Sair</a>
        </div>
    </nav>

    <!-- CONTE√öDO PRINCIPAL: Cards de Quizzes -->
    <main class="main-content">
        <div class="content-card">

            <h1 class="text-center font-semibold mb-8" style="color: var(--text-light); font-size: 1.5rem;">
                Meus Quizzes
            </h1>
            
            <a href="/professor/home" 
                class="btn btn-secondary font-bold" style="font-size: 1.1rem; 
                padding: 1rem 2rem;">
                 ‚¨ÖÔ∏è Voltar para Menu Inicial
            </a>
            
            <!-- Bot√£o de A√ß√£o R√°pida: Criar Novo Quiz -->
            <div class="flex justify-end gap-4 mb-8">
                <a href="/quiz/criar" class="btn btn-primary font-semibold">
                    ‚ûï Criar Novo Quiz
                </a>
            </div>

            <!-- Grid de Cards -->
            <!-- O Controller deve enviar a lista de Quiz na vari√°vel 'quizzes' -->
            <div class="cards">

                <div th:each="quiz : ${quizzes}" class="quiz-card">
                    <div>
                        <!-- T√≠tulo do Quiz -->
                        <h2 th:text="${quiz.titulo}" class="card-title"></h2>

                        <div class="card-details space-y-1">
                            <!-- ID da √Årea - Nota: O Controller deve buscar o nome da √°rea se necess√°rio -->
                            <strong class="text-muted">√Årea:</strong>
                            <p th:text="${quiz.nome_area}"></p>
                        </div>

                        <div class="card-details space-y-1">
                            <strong class="text-muted">N√≠vel:</strong>
                            <p th:text="${quiz.nivel_educacional}"></p>
                        </div>

                        <div class="card-details space-y-1">
                            <strong class="text-muted">Visibilidade:</strong>
                            <p th:text="${quiz.visibilidade}"></p>
                        </div>

                        <div class="card-details space-y-1">
                            <strong class="text-muted">N¬∞ Quest√µes:</strong>
                            <!-- Assumindo que num_questoes foi preenchido no Controller -->
                            <p th:text="${quiz.num_questoes}"></p>
                        </div>

                        <!-- L√≥gica de Status: Adapta a cor e o texto baseado na visibilidade -->
                        <!-- <p class="card-status mb-4" 
                           th:classappend="${quiz.visibilidade.toString() == 'P√öBLICO' ? 'status-published' : 'status-draft'}"
                           th:text="'STATUS: ' + ${quiz.visibilidade.toString()}">
                            <h3><STATUS:</h3> 
                            <p>Arrumar para mostrar o status do quiz<p>
                        </p> -->
                    </div>

                    <div class="flex gap-3 w-full mt-4">
                        <!-- Bot√£o de Edi√ß√£o -->
                        <a th:href="@{/quiz/editar/questoes/{id}(id=${quiz.id_quiz})}" class="btn btn-secondary w-1/2 text-center">
                            Editar
                        </a>

                        <form th:action="@{/quiz/excluir/{id}(id=${quiz.id_quiz})}" method="post" style="margin-left:10px; width: 50%;">
                            <!-- O bot√£o ocupa metade da largura do cont√™iner flex pai -->
                            <button type="submit" class="btn btn-danger">
                                üóëÔ∏è Excluir
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Bloco de 'sem quizzes' pode ser √∫til aqui -->
                 <div th:if="${#lists.isEmpty(quizzes)}" class="w-full text-center p-8 text-muted">
                    <p>Voc√™ ainda n√£o criou nenhum Quiz. Comece criando um novo!</p>
                </div>
            </div>
            <!-- Fim do Grid -->

        </div>
    </main>
 

    <!-- Rodap√© opcional -->
    <footer class="main-content" style="text-align: center; font-size: 0.75rem; color: var(--text-muted); margin-bottom: 1rem;">
        &copy; 2024 Educatio Quiz. Todos os direitos reservados.
    </footer>

    <script>
        // Fun√ß√µes de A√ß√£o simuladas (MANTIDAS para os bot√µes)
        function editQuiz(id) {
            console.log(`Simulando edi√ß√£o do Quiz #${id}. Redirecionando para a tela de edi√ß√£o.`);
            window.location.href = "editar_quiz.html";
        }

        function publishQuiz(id) {
            console.log(`Simulando publica√ß√£o do Quiz #${id}.`);
            alert(`Quiz #${id} publicado com sucesso!`);
        }

        function unpublishQuiz(id) {
            console.log(`Simulando exclus√£o do Quiz #${id}.`);
            alert(`Quiz #${id} exclu√≠do com sucesso!`);
        }
    </script>
</body>
</html>