<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Quizzes Dispon√≠veis</title>
    <link rel="stylesheet" th:href="@{/css/global.css}">
    <link rel="stylesheet" th:href="@{/css/fluxo_aluno.css}">
</head>
<body>
    <nav class="navbar">
        <h1>üéì Educatio Quiz - Aluno</h1>
        <div style="display: flex; align-items: center; gap: 1rem;">
            <span th:text="${aluno.nome}"></span>
            <a href="/logout" class="btn-logout">Sair</a>
        </div>
    </nav>

    <main class="main-content">
        <div class="content-card">
            
            <div class="quiz-header">
                <h2 class="text-xl font-semibold" style="color: var(--text-light);">
                    Quizzes Dispon√≠veis
                </h2>
                <a href="/aluno/home" class="btn btn-secondary">‚¨ÖÔ∏è Voltar</a>
            </div>

            <div class="filter-bar" style="background: #161b22; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; justify-content: space-between;">
                <div style="display: flex; align-items: center; gap: 1rem; width: 100%;">
                    <strong style="color: var(--text-light); white-space: nowrap;">üîê Acesso Privado:</strong>
                    
                    <form action="/aluno/quizzes/buscar-pin" method="get" style="display: flex; gap: 10px; flex-grow: 1;">
                        <input type="text" name="pin" class="form-input" placeholder="Digite o c√≥digo PIN (Ex: X9A2)..." required>
                        <button type="submit" class="btn btn-primary">Acessar Quiz</button>
                    </form>
                </div>
            </div>

            <div th:if="${erro}" class="alert alert-danger" style="margin-bottom: 1.5rem;">
                <span th:text="${erro}"></span>
            </div>

            <h3 style="color: var(--text-muted); margin-bottom: 1.5rem; border-left: 4px solid var(--accent); padding-left: 10px;">
                Recomendados para seu n√≠vel
            </h3>

            <div class="cards">
                <div th:each="quiz : ${quizzes}" class="quiz-card-aluno">
                    <div>
                        <div class="quiz-meta">
                            <span class="badge badge-nivel" th:text="${quiz.nivel_educacional}">N√≠vel</span>
                            <span class="badge badge-area" th:text="${quiz.nome_area != null ? quiz.nome_area : 'Geral'}">√Årea</span>
                        </div>
                        
                        <h3 th:text="${quiz.titulo}">T√≠tulo do Quiz</h3>
                        
                        <p style="color: var(--text-muted); font-size: 0.9rem; min-height: 40px; margin-bottom: 1rem;" 
                           th:text="${quiz.descricao ?: 'Sem descri√ß√£o dispon√≠vel.'}">
                        </p>
                        
                        <div style="font-size: 0.85rem; color: var(--text-muted);">
                            <span>Criado por: </span>
                            <strong th:text="${quiz.professor_criador_nome ?: 'Professor'}"></strong>
                        </div>
                    </div>
                    
                    <div style="margin-top: 1.5rem; padding-top: 1rem; border-top: 1px solid #2e3542;">
                        <a th:href="@{/aluno/quizzes/{id}/realizar(id=${quiz.id_quiz})}" class="btn btn-primary" style="width: 100%;">
                            ‚ñ∂Ô∏è Come√ßar Quiz
                        </a>
                    </div>
                </div>
            </div>

            <div th:if="${quizzes.isEmpty()}" style="text-align: center; padding: 4rem; color: var(--text-muted);">
                <h3>üì≠ Nenhum quiz p√∫blico encontrado.</h3>
            </div>

        </div>
    </main>
</body>
</html>