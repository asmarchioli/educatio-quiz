<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Resultado | Educatio</title>
    <link rel="stylesheet" th:href="@{/css/global2.css}">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">üéì Educatio</div>
        <div class="navbar-user">
            <span class="user-name" th:text="${aluno.nome}">Aluno</span>
        </div>
    </nav>

    <div class="main-container" style="max-width: 700px; text-align: center;">
        
        <div class="card" style="margin-top: 3rem; padding: 3rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">üéâ</div>
            <h1 style="color: var(--text-white); margin-bottom: 0.5rem;">Quiz Finalizado!</h1>
            <p style="color: var(--text-muted);" th:text="${quiz.titulo}"></p>

            <div style="display: flex; justify-content: center; gap: 2rem; margin: 2rem 0;">
                <div>
                    <div style="font-size: 0.9rem; color: var(--text-muted);">Sua Nota</div>
                    <div style="font-size: 2.5rem; font-weight: bold; color: var(--primary);" th:text="${pontuacaoTotal}">0</div>
                </div>
                <div>
                    <div style="font-size: 0.9rem; color: var(--text-muted);">Acertos</div>
                    <div style="font-size: 2.5rem; font-weight: bold; color: var(--text-white);">
                        <span th:text="${acertos}">0</span> / <span th:text="${totalQuestoes}">0</span>
                    </div>
                </div>
            </div>

            <!-- Barra de Progresso -->
            <div style="background: #30363d; height: 10px; border-radius: 5px; overflow: hidden; margin-bottom: 2rem;">
                <div th:style="'width: ' + ${(pontuacaoTotal * 100.0) / pontuacaoMaxima} + '%; background: var(--primary); height: 100%;'"></div>
            </div>

            <div style="display: flex; gap: 1rem; justify-content: center;">
                <a th:href="@{/aluno/quizzes/{id}/revisar(id=${quiz.id_quiz})}" class="btn btn-secondary">üîç Revisar Respostas</a>
                <a href="/aluno/quizzes" class="btn btn-primary">üè† Voltar ao In√≠cio</a>
            </div>
        </div>

        <!-- Ranking -->
        <div class="card" style="margin-top: 2rem; text-align: left;">
            <h3 style="color: var(--text-white); border-bottom: 1px solid var(--border); padding-bottom: 10px; margin-bottom: 15px;">
                üèÜ Ranking da Turma
            </h3>
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr style="color: var(--text-muted); font-size: 0.9rem;">
                        <th style="text-align: left; padding: 8px;">Pos</th>
                        <th style="text-align: left; padding: 8px;">Aluno</th>
                        <th style="text-align: right; padding: 8px;">Nota</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="rank, stat : ${ranking}" 
                        th:style="${rank.nomeAluno == aluno.nome} ? 'background: rgba(35, 134, 54, 0.15);' : ''"
                        style="border-bottom: 1px solid var(--border);">
                        <td style="padding: 10px;">
                            <span th:if="${stat.count == 1}">ü•á</span>
                            <span th:if="${stat.count == 2}">ü•à</span>
                            <span th:if="${stat.count == 3}">ü•â</span>
                            <span th:if="${stat.count > 3}" th:text="${stat.count} + '¬∫'"></span>
                        </td>
                        <td style="padding: 10px; font-weight: 500;" th:text="${rank.nomeAluno}"></td>
                        <td style="padding: 10px; text-align: right; color: var(--primary);" th:text="${rank.ultimaNota}"></td>
                    </tr>
                </tbody>
            </table>
        </div>

    </div>
</body>
</html>